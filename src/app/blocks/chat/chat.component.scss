@import "src/styles/variables";

$default-panel-width: 300px;

.chat-container {
  position: relative;
  overflow: hidden;
  width: 100%;
  min-height: 250px;
  height: 250px;
  margin-top: $default-offset;
  border: 1px solid $primary-blue;
  padding: $ld-offset-sm;
  border-radius: $default-thumbnail-border-radius;

  .messages-container {
    overflow-y: auto;
    max-height: 150px;
  }

  .message-container {
    &.guest-message {
      text-align: right;
    }
  }

  .message-text {
    display: inline-block;
    margin-left: $small-offset;
    padding: 2px $ld-offset-sm;
    color: #FFF;
    border-radius: $default-thumbnail-border-radius;
  }
}

.message-text {
  background: $primary-blue;
}

$user-img-height: 30px;
$emoji-container-width: 338px;
$left-margin: 18px;
$send-message-padding: 20px;

.chat-container {
  .message-input {
    width: 100%;

    .input-area {
      overflow: hidden;
    }
  }

  .chat-messages {
    height: 100%;
    overflow: auto;
    padding: $ld-offset-md $ld-offset-md 0 $ld-offset-md;
  }

  .text-area-container {
    bottom: 0;
    padding: 0 $ld-offset-sm;
    display: flex;
    align-items: center;
    margin-bottom: $ld-offset-md;
    position: absolute;
    width: calc(100% - 10px);
    margin-top: $small-offset;

    .rtc-input {
      width: 100%;

      ::ng-deep {
        .mat-form-field-wrapper {
          padding: unset;
          margin: unset;

          .mat-form-field-infix {
            border-top: unset;
            bottom: -$ld-offset-sm;
          }
        }
      }

      .emoji-icon {
        cursor: pointer;
      }
    }

    .send-message {
      cursor: pointer;
      border-radius: 50%;
      height: $user-img-height;
      width: $user-img-height;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: $send-message-padding;
      margin-left: $ld-offset-sm;
    }
  }
}

::ng-deep {
  .mat-menu-panel {
    max-width: unset;
    min-width: unset;

    .mat-menu-content {
      padding: unset;

      .emoji-menu {
        .emoji-mart {
          width: 100%!important;
        }

        .emoji-mart-search {
          display: none;
        }

        .emoji-mart-emoji:focus {
          outline: none;
        }
      }
    }
  }
}

@media screen and (min-width: $break-xs) {
  .chat-container {
    width: calc(100% - #{$default-panel-width + 3 * $default-offset});
    border-radius: $default-thumbnail-border-radius;
    .send-message {
      margin-left: $left-margin;
    }
  }

  ::ng-deep {
    .mat-menu-panel {
      .mat-menu-content {
        .emoji-menu {
          .emoji-mart {
            width: $emoji-container-width !important;
          }
        }
      }
    }
  }
}
